{"version":3,"file":"form.js","names":["timerElement","document","getElementById","dialogClose","dialog","overlay","dialogExit","subheaderExit","querySelector","countElement","startTime","Date","now","totalTime","totalQuestions","querySelectorAll","length","testTitle","textContent","addEventListener","clearDataFormStorage","onclick","close","style","display","showModal","tests","JSON","parse","localStorage","getItem","updatedTests","filter","test","setItem","stringify","window","location","href","replace","updateTimer","Math","floor","hours","minutes","seconds","concat","String","padStart","setInterval","updateAnswerCount","answeredCount","forEach","fieldset","input","currentTest","find","questions","push","questionNumber","name","split","answer","value","correctAnswer","e","preventDefault","allAnswered","question","index","checked","alert"],"sources":["form.js"],"sourcesContent":["// formLogic.js\r\n\r\nlet timerElement = document.getElementById(\"timer\");\r\nlet dialogClose = document.getElementById(\"dialog_close\");\r\nlet dialog = document.getElementById(\"dialog\");\r\nlet overlay = document.getElementById(\"overlay\");\r\nlet dialogExit = document.getElementById(\"dialog_exit\");\r\nlet subheaderExit = document.querySelector(\".subheader_exit\");\r\nlet countElement = document.getElementById(\"subheader_controls_count\");\r\nlet startTime = Date.now();\r\nlet totalTime = 0;\r\nlet totalQuestions = document.querySelectorAll('.form_fieldset').length;\r\nconst testTitle = document.getElementById(\"test_title\") ? document.getElementById(\"test_title\").textContent : \"1\";\r\n\r\ndocument.querySelector('.subheader_reset').addEventListener('click', function() {\r\n    clearDataFormStorage();\r\n});\r\n\r\ndialogClose.onclick = () => {\r\n    dialog.close();\r\n    overlay.style.display = 'none'; // Скрыть затемнение\r\n}\r\n\r\nsubheaderExit.onclick = () => {\r\n    overlay.style.display = 'block'; // Показать затемнение\r\n    dialog.showModal(); // Открыть диалог\r\n}\r\n\r\ndialogExit.onclick = () => {\r\n    clearDataFormStorage();\r\n}\r\n\r\nlet clearDataFormStorage = () => {\r\n    const tests = JSON.parse(localStorage.getItem('tests')) || [];\r\n\r\n    const updatedTests = tests.filter(test => test.testTitle !== testTitle);\r\n    localStorage.setItem('tests', JSON.stringify(updatedTests));\r\n\r\n    window.location.href = window.location.href.replace(/_(form)\\.html$/, '.html');\r\n}\r\n\r\nfunction updateTimer() {\r\n    totalTime = Math.floor((Date.now() - startTime) / 1000);\r\n    const hours = Math.floor(totalTime / 3600);\r\n    const minutes = Math.floor((totalTime % 3600) / 60);\r\n    const seconds = totalTime % 60;\r\n    timerElement.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\r\n}\r\n\r\nsetInterval(updateTimer, 1000);\r\n\r\nfunction updateAnswerCount() {\r\n    let answeredCount = 0;\r\n    document.querySelectorAll('.form_fieldset').forEach(fieldset => {\r\n        if (fieldset.querySelector('input[type=\"radio\"]:checked')) {\r\n            answeredCount++;\r\n        }\r\n    });\r\n    countElement.textContent = `${answeredCount}/${totalQuestions}`;\r\n}\r\nupdateAnswerCount();\r\n\r\n// Сохраняем выбранные ответы в localStorage\r\ndocument.querySelectorAll('input[type=\"radio\"]').forEach(input => {\r\n    input.addEventListener('change', () => {\r\n        const tests = JSON.parse(localStorage.getItem('tests')) || [];\r\n        let currentTest = tests.find(test => test.testTitle === testTitle);\r\n\r\n        if (!currentTest) {\r\n            currentTest = {\r\n                testTitle: testTitle,\r\n                totalTime: totalTime,\r\n                questions: {}\r\n            };\r\n            tests.push(currentTest);\r\n        }\r\n\r\n        let questionNumber = input.name.split('-')[1]; // Получаем номер вопроса\r\n        currentTest.questions[`question${questionNumber}`] = {\r\n            answer: input.value,\r\n            correctAnswer: document.querySelector(`input[name=\"question-${questionNumber}\"][data-isCorrect=\"true\"]`).value\r\n        };\r\n\r\n        // Обновляем общее время выполнения\r\n        currentTest.totalTime = totalTime;\r\n\r\n        localStorage.setItem('tests', JSON.stringify(tests)); // Сохраняем в localStorage\r\n        updateAnswerCount(); // Обновляем счетчик\r\n    });\r\n});\r\n\r\ndocument.getElementById(\"submit-btn\").addEventListener(\"click\", function (e) {\r\n    e.preventDefault(); // Предотвращает стандартное поведение формы\r\n\r\n    let allAnswered = true;\r\n    const questions = document.querySelectorAll(\"fieldset.form_fieldset\");\r\n    questions.forEach((question, index) => {\r\n        const checked = question.querySelector('input[type=\"radio\"]:checked');\r\n        if (!checked) {\r\n            allAnswered = false;\r\n            alert(`Пожалуйста, ответьте на вопрос ${index + 1}`);\r\n        }\r\n    });\r\n\r\n    if (allAnswered) {\r\n        const tests = JSON.parse(localStorage.getItem('tests')) || [];\r\n        let currentTest = tests.find(test => test.testTitle === testTitle);\r\n        if (currentTest) {\r\n            currentTest.totalTime = totalTime; // Обновляем общее время\r\n            localStorage.setItem('tests', JSON.stringify(tests)); // Сохраняем в localStorage\r\n        }\r\n        window.location.href = window.location.href.replace(/_(form)\\.html$/, '.html');\r\n    }\r\n});\r\n"],"mappings":"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","ignoreList":[]}